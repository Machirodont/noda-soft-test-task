### Тестовое задание для разработчика на PHP
Мы ожидаем, что Вы:
* найдете и исправите все возможные ошибки (синтаксические, проектирования, безопасности и т.д.);
* отрефакторите код файла `ReturnOperation.php` в лучший по вашему мнению вид;
* напишите в комментарии краткое резюме по коду: назначение кода и его качество.

Резюме.

Код был нормального качества, на сколько я могу судить из своего опыта.
Его назначение было ясно, а ход мысли писавшего доступен каждому,
при непродолжительном изучении. Код обрабатывает входящий HTTP-запрос
с информацией о создании нового обращения или об изменении статуса 
существующего и уведомляет об этом причастных лиц.

Среди возможных проблем кода, помимо того, что он был не завершен, то, что
его было бы сложно поддерживать и расширять, так как вся логика переплетена и
взаимозависима.

При рефакторинге отталкивался от того, что код написан в стилистике,
позволяющей запустить его на PHP 7.1, потому я сохранил эту совместимость,
и код после рефакторинга работает на PHP 7.1, хотя, конечно же, результат
был бы в разы более лаконичным, если бы был написан на современной версии языка.

В оригинальном коде не было зависимостей, поэтому я не добавлял зависимостей 
для продуктовой версии, но включил в рабочий процесс композер, а так же
использовал фреймворк для юнит тестирования и фреймворк для статического анализа
кода. 

Я использовал для запуска тестов Докер и встроенный сервер языка, так как
для задач тестового проекта призваного показать ход мысли, этого точно
достаточно.

Изначальный код был написан в стилистике близкой к процедурному
программированию, и хотя такое и без того спорно, в добавок к этому автором
были проигнорированы лучшие практики такого подхода. Так как я не имею 
достаточного опыта в процедурном программировании, я переписал приложение
в объектно-ориентированной стилистике, опираясь на идеи GRASP, принцыпы SOLID,
и популярные шаблоны проектирования, при этом, я выбрал набирающий в среде
ПХП разработчиков подход, "агрегация вместо наследования", за исключением
случаев, где я использовал трейты. Обращаю ваше внимание на то, что в
повседневной практике я их избегаю, так как считаю, что у них нет преимуществ,
но использовал их, потому что знаю, что многие со мной не согласны и чтобы вы
могли убедиться, что я знаю о их существовании.

Для того, чтобы не быть голословным, упомяну несколько техник: я представил
приложение в виде **Фронт-контроллера**, с которого все и начинается 
(NodaSoft\Operation\Operation). Это популярный и простой подход для
обработки входящих запросов, разбил существующую цельную логику на две
независимых **команды** (NodaSoft\Operation\Factory\OperationFactory)
(паттерн позволяющий подчинить логику создания нового функционала единым
принципам), немного дополнив идею **абстрактной фабрикой** (паттерн
использующийся в случаях, когда необходимо создавать группы объектов). 
Он позволил нам сократить выборы до одного (когда мы выбираем фабрику), разбить
команды на своего рода "подкоманды" (для того, чтобы разгрузить и без того
массивный код, разбив его на "обработку входящего запроса"
и "выполнение целевой задачи"), а так же, что я считаю крайне важным,
"продокументировать код" (смотря на абстрактную фабрику, потенциальный
программист сразу же увидит что от него требуется). Таким образом, мы приближаем
нашу работу к тому, что можно назвать "самодокументируемый код". Я прокинул
зависимости с помощью **Иньекции зависимостей**
(NodaSoft\Dependencies\Dependencies) - это облегчает возможное
расширение кода или изменение отдельного функционала, а также расширяет 
возможности для его тестирования. Хочу отметить, что там еще много всего,
но предлагаю вам найти это все самостоятельно. Обязательно добавлю, 
что в парочке мест, я бы даже использовал паттерн Одиночка, но не стал этого
делать, потому что его никто не любит.

В целом, хорошо бы было еще все хорошенько, задокументировать, создать
интеграционные тесты, добавить логирование, реализовать ОРМ систему (у меня на 
ее месте только обвязка), но, по моему, это слишком большая работа для тестового
задания с учетом того, что я даже на собеседовании не был. Да и большинство
проделаной мною работы, в обычной практике реализованно на много лучше на базе
популярных фреймворков.

Смотрю вперед, предвкушая возможное сотрудничество. Естественно понимаю, что
по моему тексту может показаться, что я излишне самодоволен. В чем то это так:
я доволен своим профессионализмом. Так же я совершенно точно понимаю 
свое текущее положение. Мне нужно еще долго и упорно развиваться, чтобы стать
хорошим профессионалом. Рассчитываю, что в вашей компании есть хорошие
специалисты, у которых я смогу научиться большему.




